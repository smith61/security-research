package poc.cve_2015_4732;

import java.io.IOException;
import java.io.InputStream;

public class ThreadLocalIS extends InputStream {

	public static final ThreadLocalIS INSTANCE = new ThreadLocalIS( );
	
	private ThreadLocal< InputStream > threadStream;
	
	private ThreadLocalIS( ) {
		this.threadStream = new ThreadLocal< InputStream >( );
	}
	
	public void setInputStream( InputStream is ) {
		this.threadStream.set( is );
	}
	
	public InputStream getInputStream( ) {
		return this.threadStream.get( );
	}
	
	@Override
	public int read() throws IOException {
		InputStream is = this.threadStream.get();
		if( is != null ) {
			return is.read();
		}
		return -1;
	}
	
}
